{% extends "base.html" %}

{% block content %}
  <h1>Tasks:</h1>
  <a href="{% url 'todo_list_app:task-create' %}" class="btn btn-primary">New task</a>
  {% if task_list %}
    <div>
      {% for task in task_list %}
        <div class="task">
          <strong>Status:</strong>
          {% if task.is_done %}
            <span style="color: green">Done</span>
          {% else %}
            <span style="color: red">Not done</span>
          {% endif %}
          <br>
          <strong>Created at:</strong> {{ task.created_at }}
          <br>
          <strong>Deadline:</strong> {{ task.deadline }}
          <br>
          <strong>Content:</strong> {{ task.content }}
          <br>
          <strong>Tags:</strong>
          {% if task.tags %}
            {% for tag in task.tags.all %}
              <u>#{{ tag.name }}</u>,
            {% endfor %}
          {% else %}
            <p>no tags</p>
          {% endif %}
          <br>
          <p>
            <a href="{% url 'todo_list_app:task-update' pk=task.id %}" class="btn btn-primary">Update</a>
            <a href="{% url 'todo_list_app:task-delete' pk=task.id %}" class="btn btn-danger">Delete</a>
            {% if task.is_done %}
              <a href="{% url 'todo_list_app:change-task-status' pk=task.id %}" class="btn btn-secondary">Undo</a>
            {% else %}
              <a href="{% url 'todo_list_app:change-task-status' pk=task.id %}" class="btn btn-primary">Done</a>
            {% endif %}
          </p>
        </div>
      {% endfor %}
    </div>

    <hr/>

  {% else %}
    <p>No tasks</p>
  {% endif %}
{% endblock %}
